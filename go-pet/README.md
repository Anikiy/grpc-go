# Полный цикл ci/cd написал в .gitlab-ci.yml

# Сервис gRPC реализовывает 3 важные функции:

1. Авторизация (Auth)
2. Работа с права (Permissions)    
3. Предоставление информации о пользователе (User Info)


# Действующие предполагаемые лица:

1. Пользователь (User) — человек, который вынужден авторизовываться, т.к. он хочет воспользоваться нашим URL Shortener'ом
2. URL Shortener — сервис, который будет клиентом SSO
3. Сервер авторизации (SSO) — сервис, который умеет авторизовывать, предоставлять информацию о правах пользователей и т.п.

# Как это будет работать:

1. User (или используемое им приложение) отправляет запрос в SSO, чтобы получить JWT токен авторизации
2. С этим токеном он идёт в URL Shortener, чтобы выполнять разные полезные запросы — создавать короткие ссылки, удалять их и т.п.
3. URL Shortener получает запрос от клиента, достаёт из него токен, по которому понимает кто пришел, и что ему разрешено делать

# ./go-pet/sso/
├── cmd // Команды для запуска приложения и утилит                                             
│   ├── migrator // Утилита для миграций базы данных                                                
│   └── sso //  Основная точка входа в сервис SSO                                               
├── config // Конфигурационные yaml-файлы                                              
├── internal // Внутренности проекта                                           
│   ├── app // Код для запуска различных компонентов приложения                                        
│   │   └── grpc // Запуск gRPC-сервера                                           
│   ├── config // Загрузка конфигурации                                          
│   ├── domain                                            
│   │   └── models // Структуры данных и модели домена                                        
│   ├── grpc                                             
│   │   └── auth // gRPC-хэндлеры сервиса Auth                                               
│   ├── lib // Общие вспомогательные утилиты и функции                                             
│   ├── services // Сервисный слой (бизнес-логика)                                                
│   │   ├── auth                                            
│   │   └── permissions                                        
│   └── storage // Слой работы с данными                                        
│       └── sqlite // Реализация на SQLite                                    
├── migrations // Миграции для базы данных                                       
├── storage // Файлы хранилища, например SQLite базы данных                                                  
└── tests // Функциональные тесты                                              


# ./go-pet/protos
├── gen                            
│   └── go                                          
│       └── sso // сгенерированный код на основании proto-файлы                                     
│           ├── sso_grpc.pb.go                                          
│           └── sso.pb.go                        
├── go.mod                                    
├── go.sum                                            
├── proto // proto-файлы                                              
│   └── sso                                       
│       └── sso.proto                                              
└── Taskfile.yaml // Для запуска генерации использую taskfile (https://taskfile.dev/)                                     


